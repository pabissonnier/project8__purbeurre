{% extends 'answer/layout.html' %}

{% block content %}
  <!-- Masthead -->
  <header class="masthead-search">
    <div class="container h-100">
      <div class="row h-100 align-items-center justify-content-center text-center">
        <div class="col-lg-10 align-self-end">
          <h1 class="text-uppercase text-white font-weight-bold">{{ title }} </h1>
          <hr class="divider my-4">
        </div>
      </div>
    </div>
  </header>
  <div class="row h-250 align-items-center justify-content-center text-center">
    {% for product in products %}
        <div class="col-sm-4 text center">
          <div class="result-display">
            <form method="get">
                <a href="{% url 'detail' product_id=product.id %}">
                    <div class="product_pic"><img class="img-thumbnail" src="{{ product.picture }}" alt="{{ product.name }}"></div>
                </a>
                <div class="nc_round"><h2>{{ product.nutriscore|upper }}</h2></div>
                <h3><a href="{% url 'detail' product_id=product.id %}">{{ product.name }}</a></h3>
            </form>
            <form action="{% url 'application' %}" method="get" accept-charset="utf-8">
              <button name="app-query" type="submit" value="{{ product.name }}">chercher</button>
            </form>
          </div>
        </div>
        {% if forloop.counter|divisibleby:3 %}<div class="clearfix"></div>{% endif %}
    {% endfor %}
  {% for product in products_all %}
        <div class="col-sm-4 text center">
          <div class="result-display">
            <a href="{% url 'detail' product_id=product.id %}">
                <div class="product_pic"><img class="img-thumbnail" src="{{ product.picture }}" alt="{{ product.name }}"></div>
            </a>
            <div class="nc_round"><h2>{{ product.nutriscore|upper }}</h2></div>
            <h3><a href="{% url 'detail' product_id=product.id %}">{{ product.name }}</a></h3>
            <form action="{% url 'application' %}" method="get" accept-charset="utf-8">
              <button name="app-query" type="submit" value="{{ product.name }}">chercher</button>
            </form>
          </div>
        </div>
        {% if forloop.counter|divisibleby:3 %}<div class="clearfix"></div>{% endif %}
    {% endfor %}

  <div class="pagination">
  <span class="step-links">
        {% if products_all.has_previous %}
            <a href="?page=1">&laquo; première</a>
            <a href="?page={{ products_all.previous_page_number }}">précédent</a>
        {% endif %}
        <span class="current">
            Page {{ products_all.number }} of {{ products_all.paginator.num_pages }}.
        </span>
        {% if products_all.has_next %}
            <a href="?page={{ products_all.next_page_number }}">suivant</a>
            <a href="?page={{ products_all.paginator.num_pages }}">dernière &raquo;</a>
        {% endif %}
    </span>

    <span class="step-links">
        {% if products.has_previous %}
            <a href="?page=1">&laquo; première</a>
            <a href="?page={{ products.previous_page_number }}">précédent</a>
        {% endif %}
        <span class="current">
            Page {{ products.number }} of {{ products.paginator.num_pages }}.
        </span>
        {% if products.has_next %}
            <a href="?page={{ products.next_page_number }}">suivant</a>
            <a href="?page={{ products.paginator.num_pages }}">dernière &raquo;</a>
        {% endif %}
    </span>
</div>

  </div>
{% endblock %}
